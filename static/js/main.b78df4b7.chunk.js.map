{"version":3,"sources":["firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","hooks/useCollection.js","components/Avatar.js","components/ProjectList.js","pages/dashboard/Dashboard.js","hooks/useFirestore.js","pages/create/Create.js","pages/login/Login.js","hooks/useLogin.js","pages/signup/Signup.js","hooks/useSignup.js","pages/project/ProjectComments.js","pages/project/ProjectSummary.js","pages/project/Project.js","hooks/useDocument.js","hooks/useLogout.js","assets/temple.svg","components/Navbar.js","assets/dashboard_icon.svg","assets/add_icon.svg","components/Sidebar.js","components/OnlineUsers.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","projectStorage","storage","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","console","log","Provider","value","useAuthContext","context","useContext","Error","useCollection","collection","_query","_orderBy","useState","documents","setDocuments","error","setError","query","useRef","current","orderBy","ref","where","unsubscribe","onSnapshot","snapshot","results","docs","forEach","doc","push","data","id","Avatar","src","className","alt","ProjectList","projects","length","map","project","to","name","dueDate","toDate","toDateString","assignedUsersList","photoURL","Dashboard","initialState","document","isPending","success","firestoreReducer","useFirestore","response","isCancelled","setIsCancelled","dispatchIfNotCancelled","addDocument","a","createdAt","fromDate","Date","add","addedDocument","message","deleteDocument","delete","updateDocument","updates","update","updatedDocument","categories","label","Create","history","useHistory","users","setUsers","setName","details","setDetails","setDueDate","category","setCategory","assignedUsers","setAssignedUsers","formError","setFormError","displayName","handleSubmit","e","preventDefault","u","createdBy","uid","comments","onSubmit","required","onChange","target","option","options","isMulti","Login","email","setEmail","password","setPassword","setIsPending","login","signInWithEmailAndPassword","res","documentRef","online","useLogin","disabled","Signup","setDisplayName","thumbnail","setThumbnail","thumbnailError","setThumbnailError","signup","createUserWithEmailAndPassword","uploadPath","put","img","getDownloadURL","imgUrl","updateProfile","set","useSignup","selected","files","includes","size","ProjectComments","newComment","setNewComment","commentToAdd","content","Math","random","comment","ProjectSummary","onClick","Project","setDocument","err","useDocument","useParams","Navbar","logout","currentUser","signOut","useLogout","Temple","Sidebar","exact","DashboardIcon","AddIcon","OnlineUsers","App","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"mdAeAA,IAASC,cAVc,CACrBC,OAAQ,0CACRC,WAAY,gCACZC,UAAW,gBACXC,cAAe,4BACfC,kBAAmB,eACnBC,MAAO,8CAOT,IAAMC,EAAmBR,IAASS,YAC5BC,EAAcV,IAASW,OACvBC,EAAiBZ,IAASa,UAG1BC,EAAYd,IAASS,UAAUM,U,OCnBxBC,EAAcC,0BAEdC,EAAc,SAACC,EAAOC,GACjC,OAAQA,EAAOC,MACb,IAAK,QACH,OAAO,2BAAKF,GAAZ,IAAmBG,KAAMF,EAAOG,UAClC,IAAK,SACH,OAAO,2BAAKJ,GAAZ,IAAmBG,KAAM,OAC3B,IAAK,gBACH,MAAO,CAAEA,KAAMF,EAAOG,QAASC,aAAa,GAC9C,QACE,OAAOL,IAIAM,EAAsB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACpC,EAA0BC,qBAAWT,EAAa,CAChDI,KAAM,KACNE,aAAa,IAFf,mBAAOL,EAAP,KAAcS,EAAd,KAcA,OATAC,qBAAU,WACR,IAAMC,EAAQpB,EAAYqB,oBAAmB,SAAAT,GAC3CM,EAAS,CAAEP,KAAM,gBAAiBE,QAASD,IAC3CQ,SAED,IAEHE,QAAQC,IAAI,qBAAsBd,GAGhC,cAACH,EAAYkB,SAAb,CAAsBC,MAAK,2BAAOhB,GAAP,IAAcS,aAAzC,SACIF,KCjCKU,EAAiB,WAC5B,IAAMC,EAAUC,qBAAWtB,GAE3B,IAAIqB,EACF,MAAME,MAAM,6DAGd,OAAOF,G,gBCPIG,EAAgB,SAACC,EAAYC,EAAQC,GAChD,MAAkCC,mBAAS,MAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAA0BF,mBAAS,MAAnC,mBAAOG,EAAP,KAAcC,EAAd,KAIMC,EAAQC,iBAAOR,GAAQS,QACvBC,EAAUF,iBAAOP,GAAUQ,QA+BjC,OA7BAtB,qBAAU,WACR,IAEW,EAGE,EALTwB,EAAM7C,EAAiBiC,WAAWA,GAElCQ,IACFI,GAAM,EAAAA,GAAIC,MAAJ,oBAAaL,KAEjBG,IACFC,GAAM,EAAAA,GAAID,QAAJ,oBAAeA,KAGvB,IAAMG,EAAcF,EAAIG,YAAW,SAAAC,GACjC,IAAIC,EAAU,GACdD,EAASE,KAAKC,SAAQ,SAAAC,GACpBH,EAAQI,KAAR,2BAAiBD,EAAIE,QAArB,IAA6BC,GAAIH,EAAIG,SAIvClB,EAAaY,GACbV,EAAS,SACR,SAAAD,GACDf,QAAQC,IAAIc,GACZC,EAAS,+BAIX,OAAO,kBAAMO,OAEZ,CAACd,EAAYQ,EAAOG,IAEhB,CAAEP,YAAWE,U,MCtCP,SAASkB,EAAT,GAA0B,IAARC,EAAO,EAAPA,IAC/B,OACE,qBAAKC,UAAU,SAAf,SACE,qBAAKD,IAAKA,EAAKE,IAAI,kB,MCAV,SAASC,EAAT,GAAoC,IAAbC,EAAY,EAAZA,SAGpC,OAFAtC,QAAQC,IAAIqC,GAGV,sBAAKH,UAAU,eAAf,UACuB,IAApBG,EAASC,QAAgB,4BAAG,qBAC5BD,EAASE,KAAI,SAAAC,GAAO,OACnB,eAAC,IAAD,CAAMC,GAAE,oBAAeD,EAAQT,IAA/B,UACE,6BAAKS,EAAQE,OACb,8BAAG,UAAQF,EAAQG,QAAQC,SAASC,kBACpC,sBAAKX,UAAU,cAAf,UACE,4BAAG,iCAAQ,mBACX,6BACGM,EAAQM,kBAAkBP,KAAI,SAAAlD,GAAI,OACjC,6BACE,cAAC,EAAD,CAAQ4C,IAAK5C,EAAK0D,YADX1D,EAAK0D,oBAPoBP,EAAQT,U,MCL3C,SAASiB,IACtB,MAA6BzC,EAAc,YAAnCK,EAAR,EAAQA,UAAWE,EAAnB,EAAmBA,MAEnB,OACE,gCACE,oBAAIoB,UAAU,aAAd,SAA2B,cAC1BpB,GAAS,mBAAGoB,UAAU,QAAb,SAAsBpB,IAC/BF,GAAa,cAAC,EAAD,CAAayB,SAAUzB,O,2BCZvCqC,EAAe,CACjBC,SAAU,KACVC,WAAW,EACXrC,MAAO,KACPsC,QAAS,MAGLC,EAAmB,SAACnE,EAAOC,GAC/B,OAAQA,EAAOC,MACb,IAAK,aACH,MAAO,CAAE+D,WAAW,EAAMD,SAAU,KAAME,SAAS,EAAOtC,MAAO,MACnE,IAAK,iBACH,MAAO,CAAEqC,WAAW,EAAOD,SAAU/D,EAAOG,QAAS8D,SAAS,EAAMtC,MAAO,MAC7E,IAAK,mBACH,MAAO,CAAEqC,WAAW,EAAOD,SAAU,KAAME,SAAS,EAAMtC,MAAO,MACnE,IAAK,QACH,MAAO,CAAEqC,WAAW,EAAOD,SAAU,KAAME,SAAS,EAAOtC,MAAO3B,EAAOG,SAC3E,IAAK,mBACH,MAAO,CAAE6D,WAAW,EAAOD,SAAU/D,EAAOG,QAAS8D,SAAS,EAAOtC,MAAO,MAC9E,QACE,OAAO5B,IAIAoE,EAAe,SAAC9C,GAC3B,MAA6Bd,qBAAW2D,EAAkBJ,GAA1D,mBAAOM,EAAP,KAAiB5D,EAAjB,KACA,EAAsCgB,oBAAS,GAA/C,mBAAO6C,EAAP,KAAoBC,EAApB,KAGMrC,EAAM7C,EAAiBiC,WAAWA,GAGlCkD,EAAyB,SAACvE,GACzBqE,GACH7D,EAASR,IAKPwE,EAAW,uCAAG,WAAO/B,GAAP,iBAAAgC,EAAA,6DAClBjE,EAAS,CAAEP,KAAM,eADC,SAIVyE,EAAYhF,EAAUiF,SAAS,IAAIC,MAJzB,SAKY3C,EAAI4C,IAAJ,2BAAapC,GAAb,IAAkBiC,eAL9B,OAKVI,EALU,OAMhBP,EAAuB,CAAEtE,KAAM,iBAAkBE,QAAS2E,IAN1C,gDAShBP,EAAuB,CAAEtE,KAAM,QAASE,QAAS,KAAI4E,UATrC,yDAAH,sDAcXC,EAAc,uCAAG,WAAOpC,GAAP,SAAA6B,EAAA,6DACrBjE,EAAS,CAAEP,KAAM,eADI,kBAIbgC,EAAIQ,IAAIG,GAAIqC,SAJC,OAKnBV,EAAuB,CAAEtE,KAAM,qBALZ,gDAQnBsE,EAAuB,CAAEtE,KAAM,QAASE,QAAS,qBAR9B,yDAAH,sDAad+E,EAAc,uCAAG,WAAOtC,EAAIuC,GAAX,eAAAV,EAAA,6DACrBjE,EAAS,CAAEP,KAAM,eADI,kBAIWgC,EAAIQ,IAAIG,GAAIwC,OAAOD,GAJ9B,cAIbE,EAJa,OAKnBd,EAAuB,CAAEtE,KAAM,mBAAoBE,QAASkF,IALzC,kBAMZA,GANY,uCASnBd,EAAuB,CAAEtE,KAAM,QAASE,QAAQ,EAAD,KAT5B,kBAUZ,MAVY,yDAAH,wDAkBpB,OAJAM,qBAAU,WACR,OAAO,kBAAM6D,GAAe,MAC3B,IAEI,CAAEE,cAAaQ,iBAAgBE,iBAAgBd,a,QC5ElDkB,G,MAAa,CACjB,CAAEvE,MAAO,cAAewE,MAAO,eAC/B,CAAExE,MAAO,SAAUwE,MAAO,UAC1B,CAAExE,MAAO,QAASwE,MAAO,SACzB,CAAExE,MAAO,YAAawE,MAAO,eAGhB,SAASC,IACtB,IAAMC,EAAUC,cAChB,EAAkCvB,EAAa,YAAvCK,EAAR,EAAQA,YAAaJ,EAArB,EAAqBA,SACblE,EAASc,IAATd,KACAuB,EAAcL,EAAc,SAA5BK,UACR,EAA0BD,mBAAS,IAAnC,mBAAOmE,EAAP,KAAcC,EAAd,KAGA,EAAwBpE,mBAAS,IAAjC,mBAAO+B,EAAP,KAAasC,EAAb,KACA,EAA8BrE,mBAAS,IAAvC,mBAAOsE,EAAP,KAAgBC,EAAhB,KACA,EAA8BvE,mBAAS,IAAvC,mBAAOgC,EAAP,KAAgBwC,EAAhB,KACA,EAAgCxE,mBAAS,IAAzC,mBAAOyE,EAAP,KAAiBC,EAAjB,KACA,EAA0C1E,mBAAS,IAAnD,mBAAO2E,EAAP,KAAsBC,EAAtB,KACA,EAAkC5E,mBAAS,MAA3C,mBAAO6E,EAAP,KAAkBC,EAAlB,KAGA7F,qBAAU,WACLgB,GACDmE,EAASnE,EAAU2B,KAAI,SAAAlD,GACrB,MAAO,CAAEa,MAAM,2BAAKb,GAAN,IAAY0C,GAAI1C,EAAK0C,KAAK2C,MAAOrF,EAAKqG,mBAGvD,CAAC9E,IAEJ,IAAM+E,EAAY,uCAAG,WAAOC,GAAP,mBAAAhC,EAAA,yDACnBgC,EAAEC,iBACFJ,EAAa,MAERL,EAJc,uBAKjBK,EAAa,qCALI,+BAQfH,EAAchD,OAAS,GARR,uBASjBmD,EAAa,gDATI,iCAab3C,EAAoBwC,EAAc/C,KAAI,SAAAuD,GAC1C,MAAO,CACLJ,YAAaI,EAAE5F,MAAMwF,YACrB3C,SAAU+C,EAAE5F,MAAM6C,SAClBhB,GAAI+D,EAAE5F,MAAM6B,OAGVgE,EAAY,CAChBL,YAAarG,EAAKqG,YAClB3C,SAAU1D,EAAK0D,SACfhB,GAAI1C,EAAK2G,KAGLxD,EAAU,CACdE,OACAuC,UACAnC,oBACAiD,YACAX,SAAUA,EAASlF,MACnByC,QAAS9D,EAAUiF,SAAS,IAAIC,KAAKpB,IACrCsD,SAAU,IAjCO,UAoCbtC,EAAYnB,GApCC,QAqCde,EAASzC,OACZ8D,EAAQ/C,KAAK,KAtCI,4CAAH,sDA0ClB,OACE,sBAAKK,UAAU,cAAf,UACE,oBAAIA,UAAU,aAAd,SAA2B,yBAC3B,uBAAMgE,SAAUP,EAAhB,UACE,kCACE,+BAAM,kBACN,uBACEQ,UAAQ,EACR/G,KAAK,OACLgH,SAAU,SAACR,GAAD,OAAOZ,EAAQY,EAAES,OAAOnG,QAClCA,MAAOwC,OAGX,kCACE,+BAAM,qBACN,0BACEyD,UAAQ,EACRC,SAAU,SAACR,GAAD,OAAOV,EAAWU,EAAES,OAAOnG,QACrCA,MAAO+E,OAGX,kCACE,+BAAM,kBACN,uBACEkB,UAAQ,EACR/G,KAAK,OACLgH,SAAU,SAACR,GAAD,OAAOT,EAAWS,EAAES,OAAOnG,QACrCA,MAAOyC,OAGX,kCACE,+BAAM,sBACN,cAAC,IAAD,CACEyD,SAAU,SAACE,GAAD,OAAYjB,EAAYiB,IAClCC,QAAS9B,OAGb,kCACE,+BAAM,eACN,cAAC,IAAD,CACE2B,SAAU,SAACE,GAAD,OAAYf,EAAiBe,IACvCC,QAASzB,EACT0B,SAAO,OAIX,wBAAQtE,UAAU,MAAlB,SAAwB,gBAEvBsD,GAAa,mBAAGtD,UAAU,QAAb,SAAsBsD,U,MC9H7B,SAASiB,IACtB,MAA0B9F,mBAAS,IAAnC,mBAAO+F,EAAP,KAAcC,EAAd,KACA,EAAgChG,mBAAS,IAAzC,mBAAOiG,EAAP,KAAiBC,EAAjB,KACA,ECLsB,WACtB,MAAsClG,oBAAS,GAA/C,mBAAO6C,EAAP,KAAoBC,EAApB,KACA,EAA0B9C,mBAAS,MAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAAkCJ,oBAAS,GAA3C,mBAAOwC,EAAP,KAAkB2D,EAAlB,KACQnH,EAAaQ,IAAbR,SAEFoH,EAAK,uCAAG,WAAOL,EAAOE,GAAd,iBAAAhD,EAAA,6DACZ7C,EAAS,MACT+F,GAAa,GAFD,kBAMQrI,EAAYuI,2BAA2BN,EAAOE,GANtD,cAMJK,EANI,OASJC,EAAc3I,EAAiBiC,WAAW,SAASoB,IAAIqF,EAAI5H,KAAK2G,KAT5D,SAUJkB,EAAY3C,OAAO,CAAE4C,QAAQ,IAVzB,OAaVxH,EAAS,CAAEP,KAAM,QAASE,QAAS2H,EAAI5H,OAElCmE,IACHsD,GAAa,GACb/F,EAAS,OAjBD,kDAqBLyC,IACHzC,EAAS,KAAImD,SACb4C,GAAa,IAvBL,0DAAH,wDAgCX,OAJAlH,qBAAU,WACR,OAAO,kBAAM6D,GAAe,MAC3B,IAEI,CAAEsD,QAAO5D,YAAWrC,SDjCSsG,GAA5BL,EAAR,EAAQA,MAAOjG,EAAf,EAAeA,MAAOqC,EAAtB,EAAsBA,UAOtB,OACE,uBAAM+C,SANa,SAACN,GACpBA,EAAEC,iBACFkB,EAAML,EAAOE,IAIiB1E,UAAU,YAAxC,UACE,6BAAI,UACJ,kCACE,+BAAM,WACN,uBACEiE,UAAQ,EACR/G,KAAK,QACLgH,SAAU,SAACR,GAAD,OAAOe,EAASf,EAAES,OAAOnG,QACnCA,MAAOwG,OAGX,kCACE,+BAAM,cACN,uBACEP,UAAQ,EACR/G,KAAK,WACLgH,SAAU,SAACR,GAAD,OAAOiB,EAAYjB,EAAES,OAAOnG,QACtCA,MAAO0G,QAGTzD,GAAa,wBAAQjB,UAAU,MAAlB,SAAwB,WACtCiB,GAAa,wBAAQjB,UAAU,MAAMmF,UAAQ,EAAhC,SAAiC,YAC9CvG,GAAS,qBAAKoB,UAAU,QAAf,SAAwBpB,O,MEjCzB,SAASwG,IACtB,MAA0B3G,mBAAS,IAAnC,mBAAO+F,EAAP,KAAcC,EAAd,KACA,EAAgChG,mBAAS,IAAzC,mBAAOiG,EAAP,KAAiBC,EAAjB,KACA,EAAsClG,mBAAS,IAA/C,mBAAO+E,EAAP,KAAoB6B,EAApB,KACA,EAAkC5G,mBAAS,MAA3C,mBAAO6G,EAAP,KAAkBC,EAAlB,KACA,EAA4C9G,mBAAS,MAArD,mBAAO+G,EAAP,KAAuBC,EAAvB,KACA,ECRuB,WACvB,MAAsChH,oBAAS,GAA/C,mBAAO6C,EAAP,KAAoBC,EAApB,KACA,EAA0B9C,mBAAS,MAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAAkCJ,oBAAS,GAA3C,mBAAOwC,EAAP,KAAkB2D,EAAlB,KACQnH,EAAaQ,IAAbR,SAEFiI,EAAM,uCAAG,WAAOlB,EAAOE,EAAUlB,EAAa8B,GAArC,qBAAA5D,EAAA,6DACb7C,EAAS,MACT+F,GAAa,GAFA,kBAMOrI,EAAYoJ,+BAA+BnB,EAAOE,GANzD,UAMLK,EANK,6BASH,IAAI3G,MAAM,6BATP,cAaLwH,EAbK,qBAasBb,EAAI5H,KAAK2G,IAb/B,YAasCwB,EAAU9E,MAbhD,UAcO/D,EAAeyC,IAAI0G,GAAYC,IAAIP,GAd1C,eAcLQ,EAdK,iBAeUA,EAAI5G,IAAI6G,iBAflB,eAeLC,EAfK,iBAkBLjB,EAAI5H,KAAK8I,cAAc,CAAEzC,cAAa3C,SAAUmF,IAlB3C,yBAqBL3J,EAAiBiC,WAAW,SAASoB,IAAIqF,EAAI5H,KAAK2G,KAAKoC,IAAI,CAC/DjB,QAAQ,EACRzB,cACA3C,SAAUmF,IAxBD,QA4BXvI,EAAS,CAAEP,KAAM,QAASE,QAAS2H,EAAI5H,OAElCmE,IACHsD,GAAa,GACb/F,EAAS,OAhCA,kDAoCNyC,IACHzC,EAAS,KAAImD,SACb4C,GAAa,IAtCJ,0DAAH,4DA+CZ,OAJAlH,qBAAU,WACR,OAAO,kBAAM6D,GAAe,MAC3B,IAEI,CAAEmE,SAAQ9G,QAAOqC,aD7CakF,GAA7BT,EAAR,EAAQA,OAAQzE,EAAhB,EAAgBA,UAAWrC,EAA3B,EAA2BA,MA8B3B,OACE,uBAAMoF,SA7Ba,SAACN,GACpBA,EAAEC,iBACF+B,EAAOlB,EAAOE,EAAUlB,EAAa8B,IA2BPtF,UAAU,YAAxC,UACE,6BAAI,YACJ,kCACE,+BAAM,WACN,uBACEiE,UAAQ,EACR/G,KAAK,QACLgH,SAAU,SAACR,GAAD,OAAOe,EAASf,EAAES,OAAOnG,QACnCA,MAAOwG,OAGX,kCACE,+BAAM,cACN,uBACEP,UAAQ,EACR/G,KAAK,WACLgH,SAAU,SAACR,GAAD,OAAOiB,EAAYjB,EAAES,OAAOnG,QACtCA,MAAO0G,OAGX,kCACE,+BAAM,kBACN,uBACET,UAAQ,EACR/G,KAAK,OACLgH,SAAU,SAACR,GAAD,OAAO2B,EAAe3B,EAAES,OAAOnG,QACzCA,MAAOwF,OAGX,kCACE,+BAAM,uBACN,uBACES,UAAQ,EACR/G,KAAK,OACLgH,SA1DiB,SAACR,GACxB6B,EAAa,MACb,IAAIa,EAAW1C,EAAES,OAAOkC,MAAM,GAC9BxI,QAAQC,IAAIsI,GAEPA,EAIAA,EAASlJ,KAAKoJ,SAAS,SAIxBF,EAASG,KAAO,IAClBd,EAAkB,4CAIpBA,EAAkB,MAClBF,EAAaa,GACbvI,QAAQC,IAAI,sBAVV2H,EAAkB,kCAJlBA,EAAkB,2BAsDfD,GAAkB,qBAAKxF,UAAU,QAAf,SAAwBwF,QAE3CvE,GAAa,wBAAQjB,UAAU,MAAlB,SAAwB,YACtCiB,GAAa,wBAAQjB,UAAU,MAAMmF,UAAQ,EAAhC,SAAiC,YAC9CvG,GAAS,qBAAKoB,UAAU,QAAf,SAAwBpB,OE7EzB,SAAS4H,EAAT,GAAuC,IAAZlG,EAAW,EAAXA,QAChCnD,EAASc,IAATd,KACR,EAAqCiE,EAAa,YAA1Ce,EAAR,EAAQA,eAAgBd,EAAxB,EAAwBA,SACxB,EAAoC5C,mBAAS,IAA7C,mBAAOgI,EAAP,KAAmBC,EAAnB,KAEMjD,EAAY,uCAAG,WAAOC,GAAP,eAAAhC,EAAA,6DACnBgC,EAAEC,iBAEIgD,EAAe,CACnBnD,YAAarG,EAAKqG,YAClB3C,SAAU1D,EAAK0D,SACf+F,QAASH,EACT9E,UAAWhF,EAAUiF,SAAS,IAAIC,MAClChC,GAAIgH,KAAKC,UARQ,SAWb3E,EAAe7B,EAAQT,GAAI,CAC/BkE,SAAS,GAAD,mBAAMzD,EAAQyD,UAAd,CAAwB4C,MAZf,OAcdtF,EAASzC,OACZ8H,EAAc,IAfG,2CAAH,sDAmBlB,OACE,sBAAK1G,UAAU,mBAAf,UACE,6BAAI,qBAEJ,6BACGM,EAAQyD,SAAS3D,OAAS,GAAKE,EAAQyD,SAAS1D,KAAI,SAAA0G,GAAO,OAC1D,+BACE,sBAAK/G,UAAU,iBAAf,UACE,cAAC,EAAD,CAAQD,IAAKgH,EAAQlG,WACrB,4BAAIkG,EAAQvD,iBAEd,qBAAKxD,UAAU,eAAf,SACE,4BAAG,gBAEL,qBAAKA,UAAU,kBAAf,SACE,4BAAI+G,EAAQH,cATPG,EAAQlH,SAerB,uBAAMG,UAAU,cAAcgE,SAAUP,EAAxC,UACE,kCACE,+BAAM,qBACN,0BACES,SAAU,SAACR,GAAD,OAAOgD,EAAchD,EAAES,OAAOnG,QACxCA,MAAOyI,OAGX,wBAAQzG,UAAU,MAAlB,SAAwB,sBCtDjB,SAASgH,EAAT,GAAsC,IAAZ1G,EAAW,EAAXA,QAC/B2B,EAAmBb,EAAa,YAAhCa,eACA9E,EAASc,IAATd,KACFuF,EAAUC,cAOhB,OACE,gCACE,sBAAK3C,UAAU,kBAAf,UACE,oBAAIA,UAAU,aAAd,SAA4BM,EAAQE,OACpC,8BAAG,MAAIF,EAAQuD,UAAUL,eACzB,oBAAGxD,UAAU,WAAb,UAAwB,kBACNM,EAAQG,QAAQC,SAASC,kBAE3C,mBAAGX,UAAU,UAAb,SACGM,EAAQyC,UAEX,6BAAI,yBACJ,qBAAK/C,UAAU,iBAAf,SACGM,EAAQM,kBAAkBP,KAAI,SAAAlD,GAAI,OACjC,8BACE,cAAC,EAAD,CAAQ4C,IAAK5C,EAAK0D,YADV1D,EAAK0C,YAMpB1C,EAAK2G,MAAQxD,EAAQuD,UAAUhE,IAC9B,wBAAQG,UAAU,MAAMiH,QA1BV,WAClBhF,EAAe3B,EAAQT,IACvB6C,EAAQ/C,KAAK,MAwBT,SAA8C,wB,MC1BvC,SAASuH,IACtB,IACA,ECTyB,SAAC5I,EAAYuB,GACtC,MAAgCpB,mBAAS,MAAzC,mBAAOuC,EAAP,KAAiBmG,EAAjB,KACA,EAA0B1I,mBAAS,MAAnC,mBAAOG,EAAP,KAAcC,EAAd,KAyBA,OAtBAnB,qBAAU,WACR,IAEM0B,EAFM/C,EAAiBiC,WAAWA,GAAYoB,IAAIG,GAEhCR,YAAW,SAAAC,GAE9BA,EAASM,QACVuH,EAAY,2BAAI7H,EAASM,QAAd,IAAsBC,GAAIP,EAASO,MAC9ChB,EAAS,OAGTA,EAAS,8BAEV,SAAAuI,GACDvJ,QAAQC,IAAIsJ,EAAIpF,SAChBnD,EAAS,6BAIX,OAAO,kBAAMO,OAEZ,CAACd,EAAYuB,IAET,CAAEmB,WAAUpC,SDlBSyI,CAAY,WADzBC,cAAPzH,IACAmB,EAAR,EAAQA,SAAUpC,EAAlB,EAAkBA,MAElB,OAAIA,EACK,qBAAKoB,UAAU,QAAf,SAAwBpB,IAE5BoC,EAKH,sBAAKhB,UAAU,kBAAf,UACE,cAACgH,EAAD,CAAgB1G,QAASU,IACzB,cAACwF,EAAD,CAAiBlG,QAASU,OANrB,qBAAKhB,UAAU,UAAf,SAAyB,e,MEd7B,ICJQ,MAA0B,mCCQ1B,SAASuH,IACtB,MFLuB,WACvB,MAAsC9I,oBAAS,GAA/C,mBAAO6C,EAAP,KAAoBC,EAApB,KACA,EAA0B9C,mBAAS,MAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAAkCJ,oBAAS,GAA3C,mBAAOwC,EAAP,KAAkB2D,EAAlB,KACQnH,EAAaQ,IAAbR,SAEF+J,EAAM,uCAAG,4BAAA9F,EAAA,6DACb7C,EAAS,MACT+F,GAAa,GAFA,SAMHd,EAAQvH,EAAYkL,YAApB3D,IANG,SAOLzH,EAAiBiC,WAAW,SAASoB,IAAIoE,GAAKzB,OAAO,CAAE4C,QAAQ,IAP1D,uBAUL1I,EAAYmL,UAVP,OAaXjK,EAAS,CAAEP,KAAM,WAGZoE,IACHsD,GAAa,GACb/F,EAAS,OAlBA,kDAsBNyC,IACHzC,EAAS,KAAImD,SACb4C,GAAa,IAxBJ,0DAAH,qDAiCZ,OAJAlH,qBAAU,WACR,OAAO,kBAAM6D,GAAe,MAC3B,IAEI,CAAEiG,SAAQ5I,QAAOqC,aElCM0G,GAAtBH,EAAR,EAAQA,OAAQvG,EAAhB,EAAgBA,UACR9D,EAASc,IAATd,KAER,OACE,qBAAK6C,UAAU,SAAf,SACE,gCACI7C,GACA,qCACE,qBAAI6C,UAAU,OAAd,UACE,qBAAKD,IAAK6H,EAAQ3H,IAAI,cACtB,+BAAM,gBAGR,6BAAI,cAAC,IAAD,CAAMM,GAAG,SAAT,SAAkB,YACtB,6BAAI,cAAC,IAAD,CAAMA,GAAG,UAAT,SAAmB,gBAI1BpD,GACC,gCACI8D,GAAa,wBAAQjB,UAAU,MAAMiH,QAASO,EAAjC,SAAyC,WACvDvG,GAAa,wBAAQjB,UAAU,MAAMmF,UAAQ,EAAhC,SAAiC,2B,UC9B5C,MAA0B,2CCA1B,MAA0B,qCCW1B,SAAS0C,IACtB,IAAQ1K,EAASc,IAATd,KAER,OACE,qBAAK6C,UAAU,UAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,sBAAKA,UAAU,OAAf,UACE,cAAC,EAAD,CAAQD,IAAK5C,EAAK0D,WAClB,8BAAG,OAAK1D,EAAKqG,kBAEf,qBAAKxD,UAAU,QAAf,SACE,+BACE,6BACE,eAAC,IAAD,CAAS8H,OAAK,EAACvH,GAAG,IAAlB,UACE,qBAAKR,IAAKgI,EAAe9H,IAAI,mBAC7B,+BAAM,mBAGV,6BACE,eAAC,IAAD,CAASM,GAAG,UAAZ,UACE,qBAAKR,IAAKiI,EAAS/H,IAAI,qBACvB,+BAAM,+B,MCxBP,SAASgI,IACtB,MAAwC5J,EAAc,SAA9C4C,EAAR,EAAQA,UAAWrC,EAAnB,EAAmBA,MAAOF,EAA1B,EAA0BA,UAE1B,OACE,sBAAKsB,UAAU,YAAf,UACE,6BAAI,cACHiB,GAAa,8BAAK,qBAClBrC,GAAS,8BAAMA,IACfF,GAAaA,EAAU2B,KAAI,SAAAlD,GAAI,OAC9B,sBAAmB6C,UAAU,iBAA7B,UACG7C,EAAK8H,QAAU,sBAAMjF,UAAU,gBAChC,+BAAO7C,EAAKqG,cACZ,cAAC,EAAD,CAAQzD,IAAK5C,EAAK0D,aAHV1D,EAAK0C,UCuCRqI,MAxCf,WACE,MAA8BjK,IAAtBZ,EAAR,EAAQA,YAAaF,EAArB,EAAqBA,KAErB,OACE,qBAAK6C,UAAU,MAAf,SACG3C,GACC,eAAC,IAAD,WACGF,GAAQ,cAAC,EAAD,IACT,sBAAK6C,UAAU,YAAf,UACE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,eAAC,IAAD,CAAO8H,OAAK,EAACK,KAAK,IAAlB,WACIhL,GAAQ,cAAC,IAAD,CAAUoD,GAAG,WACtBpD,GAAQ,cAAC,EAAD,OAEX,eAAC,IAAD,CAAOgL,KAAK,UAAZ,WACIhL,GAAQ,cAAC,IAAD,CAAUoD,GAAG,WACtBpD,GAAQ,cAAC,EAAD,OAEX,eAAC,IAAD,CAAOgL,KAAK,gBAAZ,WACIhL,GAAQ,cAAC,IAAD,CAAUoD,GAAG,WACtBpD,GAAQ,cAAC,EAAD,OAEX,eAAC,IAAD,CAAOgL,KAAK,SAAZ,UACGhL,GAAQ,cAAC,IAAD,CAAUoD,GAAG,OACpBpD,GAAQ,cAAC,EAAD,OAEZ,eAAC,IAAD,CAAOgL,KAAK,UAAZ,UACGhL,GAAQA,EAAKqG,aAAe,cAAC,IAAD,CAAUjD,GAAG,OACxCpD,GAAQ,cAAC,EAAD,aAIfA,GAAQ,cAAC,EAAD,UC3CnBiL,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,UACE,cAAC,EAAD,QAGJtH,SAASuH,eAAe,W","file":"static/js/main.b78df4b7.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\nimport 'firebase/storage'\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDAxFuyh7QSdocWQlbbni2kzXAs69uyXsQ\",\r\n  authDomain: \"thedojo-defda.firebaseapp.com\",\r\n  projectId: \"thedojo-defda\",\r\n  storageBucket: \"thedojo-defda.appspot.com\",\r\n  messagingSenderId: \"806908191491\",\r\n  appId: \"1:806908191491:web:90b3870bd83df4b0a93f36\"\r\n};\r\n\r\n// init firebase\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\n// init services\r\nconst projectFirestore = firebase.firestore()\r\nconst projectAuth = firebase.auth()\r\nconst projectStorage = firebase.storage()\r\n\r\n// timestamp\r\nconst timestamp = firebase.firestore.Timestamp\r\n\r\nexport { projectFirestore, projectAuth, timestamp, projectStorage }","\r\nimport { createContext, useReducer, useEffect } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\n\r\nexport const AuthContext = createContext()\r\n\r\nexport const authReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      return { ...state, user: action.payload }\r\n    case 'LOGOUT':\r\n      return { ...state, user: null }\r\n    case 'AUTH_IS_READY':\r\n      return { user: action.payload, authIsReady: true }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, { \r\n    user: null,\r\n    authIsReady: false\r\n  })\r\n\r\n  useEffect(() => {\r\n    const unsub = projectAuth.onAuthStateChanged(user => {\r\n      dispatch({ type: 'AUTH_IS_READY', payload: user })\r\n      unsub()\r\n    })\r\n  }, [])\r\n\r\n  console.log('AuthContext state:', state)\r\n  \r\n  return (\r\n    <AuthContext.Provider value={{ ...state, dispatch }}>\r\n      { children }\r\n    </AuthContext.Provider>\r\n  )\r\n\r\n}","import { AuthContext } from \"../context/AuthContext\"\r\nimport { useContext } from \"react\"\r\n\r\nexport const useAuthContext = () => {\r\n  const context = useContext(AuthContext)\r\n\r\n  if(!context) {\r\n    throw Error('useAuthContext must be used inside an AuthContextProvider')\r\n  }\r\n\r\n  return context\r\n}","import { useEffect, useState, useRef } from \"react\"\r\nimport { projectFirestore } from \"../firebase/config\"\r\n\r\nexport const useCollection = (collection, _query, _orderBy) => {\r\n  const [documents, setDocuments] = useState(null)\r\n  const [error, setError] = useState(null)\r\n\r\n  // if we don't use a ref --> infinite loop in useEffect\r\n  // _query is an array and is \"different\" on every function call\r\n  const query = useRef(_query).current\r\n  const orderBy = useRef(_orderBy).current\r\n\r\n  useEffect(() => {\r\n    let ref = projectFirestore.collection(collection)\r\n\r\n    if (query) {\r\n      ref = ref.where(...query)\r\n    }\r\n    if (orderBy) {\r\n      ref = ref.orderBy(...orderBy)\r\n    }\r\n\r\n    const unsubscribe = ref.onSnapshot(snapshot => {\r\n      let results = []\r\n      snapshot.docs.forEach(doc => {\r\n        results.push({...doc.data(), id: doc.id})\r\n      });\r\n      \r\n      // update state\r\n      setDocuments(results)\r\n      setError(null)\r\n    }, error => {\r\n      console.log(error)\r\n      setError('could not fetch the data')\r\n    })\r\n\r\n    // unsubscribe on unmount\r\n    return () => unsubscribe()\r\n\r\n  }, [collection, query, orderBy])\r\n\r\n  return { documents, error }\r\n}\r\n\r\n","// styles\r\nimport './Avatar.css'\r\n\r\nexport default function Avatar({ src }) {\r\n  return (\r\n    <div className=\"avatar\">\r\n      <img src={src} alt=\"user avatar\" />\r\n    </div>\r\n  )\r\n}","import { Link } from 'react-router-dom'\r\nimport Avatar from '../components/Avatar'\r\n\r\n// styles\r\nimport './ProjectList.css'\r\n\r\nexport default function ProjectList({ projects }) {\r\n  console.log(projects)\r\n\r\n  return (\r\n    <div className=\"project-list\">\r\n      {projects.length === 0 && <p>No projects yet!</p>}\r\n      {projects.map(project => (\r\n        <Link to={`/projects/${project.id}`} key={project.id}>\r\n          <h4>{project.name}</h4>\r\n          <p>Due by {project.dueDate.toDate().toDateString()}</p>\r\n          <div className=\"assigned-to\">\r\n            <p><strong>Assigned to:</strong></p>\r\n            <ul>\r\n              {project.assignedUsersList.map(user => (\r\n                <li key={user.photoURL}>\r\n                  <Avatar src={user.photoURL} />\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </Link>\r\n      ))}\r\n    </div>\r\n  )\r\n}","import { useCollection } from '../../hooks/useCollection'\r\n\r\n// components\r\nimport ProjectList from '../../components/ProjectList'\r\n\r\n// styles\r\nimport './Dashboard.css'\r\n\r\nexport default function Dashboard() {\r\n  const { documents, error } = useCollection('projects')\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"page-title\">Dashboard</h2>\r\n      {error && <p className=\"error\">{error}</p>}\r\n      {documents && <ProjectList projects={documents} />}\r\n    </div>\r\n  )\r\n}","import { useReducer, useEffect, useState } from \"react\"\r\nimport { projectFirestore, timestamp } from \"../firebase/config\"\r\n\r\nlet initialState = {\r\n  document: null,\r\n  isPending: false,\r\n  error: null,\r\n  success: null,\r\n}\r\n\r\nconst firestoreReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'IS_PENDING':\r\n      return { isPending: true, document: null, success: false, error: null }\r\n    case 'ADDED_DOCUMENT':\r\n      return { isPending: false, document: action.payload, success: true, error: null }\r\n    case 'DELETED_DOCUMENT':\r\n      return { isPending: false, document: null, success: true, error: null }\r\n    case 'ERROR':\r\n      return { isPending: false, document: null, success: false, error: action.payload }\r\n    case \"UPDATED_DOCUMENT\":\r\n      return { isPending: false, document: action.payload, success: true,  error: null }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const useFirestore = (collection) => {\r\n  const [response, dispatch] = useReducer(firestoreReducer, initialState)\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n\r\n  // collection ref\r\n  const ref = projectFirestore.collection(collection)\r\n\r\n  // only dispatch if not cancelled\r\n  const dispatchIfNotCancelled = (action) => {\r\n    if (!isCancelled) {\r\n      dispatch(action)\r\n    }\r\n  }\r\n  \r\n  // add a document\r\n  const addDocument = async (doc) => {\r\n    dispatch({ type: 'IS_PENDING' })\r\n\r\n    try {\r\n      const createdAt = timestamp.fromDate(new Date())\r\n      const addedDocument = await ref.add({ ...doc, createdAt })\r\n      dispatchIfNotCancelled({ type: 'ADDED_DOCUMENT', payload: addedDocument })\r\n    }\r\n    catch (err) {\r\n      dispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\r\n    }\r\n  }\r\n\r\n  // delete a document\r\n  const deleteDocument = async (id) => {\r\n    dispatch({ type: 'IS_PENDING' })\r\n\r\n    try {\r\n      await ref.doc(id).delete()\r\n      dispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\r\n    }\r\n    catch (err) {\r\n      dispatchIfNotCancelled({ type: 'ERROR', payload: 'could not delete' })\r\n    }\r\n  }\r\n\r\n  // update a document\r\n  const updateDocument = async (id, updates) => {\r\n    dispatch({ type: \"IS_PENDING\" })\r\n\r\n    try {\r\n      const updatedDocument = await ref.doc(id).update(updates)\r\n      dispatchIfNotCancelled({ type: \"UPDATED_DOCUMENT\", payload: updatedDocument })\r\n      return updatedDocument\r\n    } \r\n    catch (error) {\r\n      dispatchIfNotCancelled({ type: \"ERROR\", payload: error })\r\n      return null\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { addDocument, deleteDocument, updateDocument, response }\r\n\r\n}","import { useState, useEffect } from 'react'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { timestamp } from '../../firebase/config'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport { useHistory } from 'react-router'\r\nimport Select from 'react-select'\r\n\r\n// styles\r\nimport './Create.css'\r\n\r\nconst categories = [\r\n  { value: 'development', label: 'Development' },\r\n  { value: 'design', label: 'Design' },\r\n  { value: 'sales', label: 'Sales' },\r\n  { value: 'marketing', label: 'Marketing' },\r\n]\r\n\r\nexport default function Create() {\r\n  const history = useHistory()\r\n  const { addDocument, response } = useFirestore('projects')\r\n  const { user } = useAuthContext()\r\n  const { documents } = useCollection('users')\r\n  const [users, setUsers] = useState([])\r\n\r\n  // form field values\r\n  const [name, setName] = useState('')\r\n  const [details, setDetails] = useState('')\r\n  const [dueDate, setDueDate] = useState('')\r\n  const [category, setCategory] = useState('')\r\n  const [assignedUsers, setAssignedUsers] = useState([])\r\n  const [formError, setFormError] = useState(null)\r\n\r\n  // create user values for react-select\r\n  useEffect(() => {\r\n    if(documents) {\r\n      setUsers(documents.map(user => {\r\n        return { value: {...user, id: user.id}, label: user.displayName }\r\n      }))\r\n    }\r\n  }, [documents])\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    setFormError(null)\r\n\r\n    if (!category) {\r\n      setFormError('Please select a project category.')\r\n      return\r\n    }\r\n    if (assignedUsers.length < 1) {\r\n      setFormError('Please assign the project to at least 1 user')\r\n      return\r\n    }\r\n\r\n    const assignedUsersList = assignedUsers.map(u => {\r\n      return { \r\n        displayName: u.value.displayName, \r\n        photoURL: u.value.photoURL,\r\n        id: u.value.id\r\n      }\r\n    })\r\n    const createdBy = { \r\n      displayName: user.displayName, \r\n      photoURL: user.photoURL,\r\n      id: user.uid\r\n    }\r\n\r\n    const project = {\r\n      name,\r\n      details,\r\n      assignedUsersList, \r\n      createdBy,\r\n      category: category.value,\r\n      dueDate: timestamp.fromDate(new Date(dueDate)),\r\n      comments: []\r\n    }\r\n\r\n    await addDocument(project)\r\n    if (!response.error) {\r\n      history.push('/')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"create-form\">\r\n      <h2 className=\"page-title\">Create a new Project</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>Project name:</span>\r\n          <input\r\n            required \r\n            type=\"text\" \r\n            onChange={(e) => setName(e.target.value)}\r\n            value={name}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>Project Details:</span>\r\n          <textarea \r\n            required\r\n            onChange={(e) => setDetails(e.target.value)}\r\n            value={details} \r\n          ></textarea>\r\n        </label>\r\n        <label>\r\n          <span>Set due date:</span>\r\n          <input\r\n            required \r\n            type=\"date\" \r\n            onChange={(e) => setDueDate(e.target.value)} \r\n            value={dueDate}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>Project category:</span>\r\n          <Select\r\n            onChange={(option) => setCategory(option)}\r\n            options={categories}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>Assign to:</span>\r\n          <Select\r\n            onChange={(option) => setAssignedUsers(option)}\r\n            options={users}\r\n            isMulti\r\n          />\r\n        </label>\r\n\r\n        <button className=\"btn\">Add Project</button>\r\n\r\n        {formError && <p className=\"error\">{formError}</p>}\r\n      </form>\r\n    </div>\r\n  )\r\n}","import { useState } from 'react'\r\nimport { useLogin } from '../../hooks/useLogin'\r\n\r\n// styles\r\nimport './Login.css'\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const { login, error, isPending } = useLogin()\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    login(email, password)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"auth-form\">\r\n      <h2>login</h2>\r\n      <label>\r\n        <span>email:</span>\r\n        <input\r\n          required\r\n          type=\"email\" \r\n          onChange={(e) => setEmail(e.target.value)} \r\n          value={email} \r\n        />\r\n      </label>\r\n      <label>\r\n        <span>password:</span>\r\n        <input \r\n          required\r\n          type=\"password\" \r\n          onChange={(e) => setPassword(e.target.value)} \r\n          value={password} \r\n        />\r\n      </label>\r\n      {!isPending && <button className=\"btn\">Log in</button>}\r\n      {isPending && <button className=\"btn\" disabled>loading</button>}\r\n      {error && <div className=\"error\">{error}</div>}\r\n    </form>\r\n  )\r\n}","import { useState, useEffect } from 'react'\r\nimport { projectAuth, projectFirestore } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogin = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n\r\n  const login = async (email, password) => {\r\n    setError(null)\r\n    setIsPending(true)\r\n  \r\n    try {\r\n      // login\r\n      const res = await projectAuth.signInWithEmailAndPassword(email, password)\r\n\r\n      // update online status\r\n      const documentRef = projectFirestore.collection('users').doc(res.user.uid)\r\n      await documentRef.update({ online: true })\r\n\r\n      // dispatch login action\r\n      dispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      }\r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { login, isPending, error }\r\n}","import { useState } from 'react'\r\nimport { useSignup } from '../../hooks/useSignup'\r\n\r\n// styles\r\nimport './Signup.css'\r\n\r\nexport default function Signup() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [displayName, setDisplayName] = useState('')\r\n  const [thumbnail, setThumbnail] = useState(null)\r\n  const [thumbnailError, setThumbnailError] = useState(null)\r\n  const { signup, isPending, error } = useSignup()\r\n  \r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    signup(email, password, displayName, thumbnail)\r\n  }\r\n\r\n  const handleFileChange = (e) => {\r\n    setThumbnail(null)\r\n    let selected = e.target.files[0]\r\n    console.log(selected)\r\n\r\n    if (!selected) {\r\n      setThumbnailError('Please select a file')\r\n      return\r\n    }\r\n    if (!selected.type.includes('image')) {\r\n      setThumbnailError('Selected file must be an image')\r\n      return\r\n    }\r\n    if (selected.size > 100000) {\r\n      setThumbnailError('Image file size must be less than 100kb')\r\n      return\r\n    }\r\n    \r\n    setThumbnailError(null)\r\n    setThumbnail(selected)\r\n    console.log('thumbnail updated')\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"auth-form\">\r\n      <h2>sign up</h2>\r\n      <label>\r\n        <span>email:</span>\r\n        <input\r\n          required \r\n          type=\"email\" \r\n          onChange={(e) => setEmail(e.target.value)} \r\n          value={email}\r\n        />\r\n      </label>\r\n      <label>\r\n        <span>password:</span>\r\n        <input\r\n          required\r\n          type=\"password\" \r\n          onChange={(e) => setPassword(e.target.value)} \r\n          value={password}\r\n        />\r\n      </label>\r\n      <label>\r\n        <span>display name:</span>\r\n        <input\r\n          required\r\n          type=\"text\" \r\n          onChange={(e) => setDisplayName(e.target.value)} \r\n          value={displayName}\r\n        />\r\n      </label>\r\n      <label>\r\n        <span>Profile thumbnail:</span>\r\n        <input \r\n          required\r\n          type=\"file\"\r\n          onChange={handleFileChange}\r\n        />\r\n        {thumbnailError && <div className=\"error\">{thumbnailError}</div>}\r\n      </label>\r\n      {!isPending && <button className=\"btn\">Sign up</button>}\r\n      {isPending && <button className=\"btn\" disabled>loading</button>}\r\n      {error && <div className=\"error\">{error}</div>}\r\n    </form>\r\n  )\r\n}","import { useState, useEffect } from 'react'\r\nimport { projectAuth, projectStorage, projectFirestore } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useSignup = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n\r\n  const signup = async (email, password, displayName, thumbnail) => {\r\n    setError(null)\r\n    setIsPending(true)\r\n  \r\n    try {\r\n      // signup\r\n      const res = await projectAuth.createUserWithEmailAndPassword(email, password)\r\n\r\n      if (!res) {\r\n        throw new Error('Could not complete signup')\r\n      }\r\n\r\n      // upload user thumbnail\r\n      const uploadPath = `thumbnails/${res.user.uid}/${thumbnail.name}`\r\n      const img = await projectStorage.ref(uploadPath).put(thumbnail)\r\n      const imgUrl = await img.ref.getDownloadURL()\r\n\r\n      // add display AND PHOTO_URL name to user\r\n      await res.user.updateProfile({ displayName, photoURL: imgUrl })\r\n\r\n      // create a user document\r\n      await projectFirestore.collection('users').doc(res.user.uid).set({ \r\n        online: true,\r\n        displayName,\r\n        photoURL: imgUrl,\r\n      })\r\n\r\n      // dispatch login action\r\n      dispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      }\r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { signup, error, isPending }\r\n}","import { useState } from \"react\"\r\nimport { timestamp } from \"../../firebase/config\"\r\nimport { useAuthContext } from \"../../hooks/useAuthContext\"\r\nimport { useFirestore } from \"../../hooks/useFirestore\"\r\nimport Avatar from \"../../components/Avatar\"\r\n\r\nexport default function ProjectComments({ project }) {\r\n  const { user } = useAuthContext()\r\n  const { updateDocument, response } = useFirestore('projects')\r\n  const [newComment, setNewComment] = useState('')\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const commentToAdd = {\r\n      displayName: user.displayName,\r\n      photoURL: user.photoURL,\r\n      content: newComment,\r\n      createdAt: timestamp.fromDate(new Date()),\r\n      id: Math.random()\r\n    }\r\n    \r\n    await updateDocument(project.id, {\r\n      comments: [...project.comments, commentToAdd],\r\n    })\r\n    if (!response.error) {\r\n      setNewComment('')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"project-comments\">\r\n      <h4>Project Comments</h4>\r\n\r\n      <ul>\r\n        {project.comments.length > 0 && project.comments.map(comment => (\r\n          <li key={comment.id}>\r\n            <div className=\"comment-author\">\r\n              <Avatar src={comment.photoURL} />\r\n              <p>{comment.displayName}</p>\r\n            </div>\r\n            <div className=\"comment-date\">\r\n              <p>date here</p>\r\n            </div>\r\n            <div className=\"comment-content\">\r\n              <p>{comment.content}</p>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <form className=\"add-comment\" onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>Add new comment:</span>\r\n          <textarea \r\n            onChange={(e) => setNewComment(e.target.value)}\r\n            value={newComment}\r\n          ></textarea>\r\n        </label>\r\n        <button className=\"btn\">Add Comment</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}","import Avatar from \"../../components/Avatar\"\r\nimport { useFirestore } from \"../../hooks/useFirestore\"\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuthContext } from \"../../hooks/useAuthContext\"\r\n\r\nexport default function ProjectSummary({ project }) {\r\n  const { deleteDocument } = useFirestore('projects')\r\n  const { user } = useAuthContext()\r\n  const history = useHistory()\r\n\r\n  const handleClick = () => {\r\n    deleteDocument(project.id)\r\n    history.push('/')\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"project-summary\">\r\n        <h2 className=\"page-title\">{project.name}</h2>\r\n        <p>By {project.createdBy.displayName}</p>\r\n        <p className=\"due-date\">\r\n          Project due by {project.dueDate.toDate().toDateString()}\r\n        </p>\r\n        <p className=\"details\">\r\n          {project.details}\r\n        </p>\r\n        <h4>Project assigned to:</h4>\r\n        <div className=\"assigned-users\">\r\n          {project.assignedUsersList.map(user => (\r\n            <div key={user.id}>\r\n              <Avatar src={user.photoURL} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {user.uid === project.createdBy.id && (\r\n        <button className=\"btn\" onClick={handleClick}>Mark as Complete</button>\r\n      )}\r\n    </div>\r\n  )\r\n}","import { useParams } from \"react-router-dom\"\r\nimport { useDocument } from '../../hooks/useDocument'\r\n\r\n// components\r\nimport ProjectComments from \"./ProjectComments\"\r\nimport ProjectSummary from \"./ProjectSummary\"\r\n\r\n// styles\r\nimport './Project.css'\r\n\r\nexport default function Project() {\r\n  const { id } = useParams()\r\n  const { document, error } = useDocument('projects', id)\r\n\r\n  if (error) {\r\n    return <div className=\"error\">{error}</div>\r\n  }\r\n  if (!document) {\r\n    return <div className=\"loading\">Loading...</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"project-details\">\r\n      <ProjectSummary project={document} />\r\n      <ProjectComments project={document} />\r\n    </div>\r\n  )\r\n}","import { useEffect, useState } from \"react\"\r\nimport { projectFirestore } from \"../firebase/config\"\r\n\r\nexport const useDocument = (collection, id) => {\r\n  const [document, setDocument] = useState(null)\r\n  const [error, setError] = useState(null)\r\n\r\n  // realtime document data\r\n  useEffect(() => {\r\n    const ref = projectFirestore.collection(collection).doc(id)\r\n\r\n    const unsubscribe = ref.onSnapshot(snapshot => {\r\n      // need to make sure the doc exists & has data\r\n      if(snapshot.data()) {\r\n        setDocument({...snapshot.data(), id: snapshot.id})\r\n        setError(null)\r\n      }\r\n      else {\r\n        setError('No such document exists')\r\n      }\r\n    }, err => {\r\n      console.log(err.message)\r\n      setError('failed to get document')\r\n    })\r\n\r\n    // unsubscribe on unmount\r\n    return () => unsubscribe()\r\n\r\n  }, [collection, id])\r\n\r\n  return { document, error }\r\n}","import { useEffect, useState } from 'react'\r\nimport { projectAuth, projectFirestore } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogout = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n  \r\n  const logout = async () => {\r\n    setError(null)\r\n    setIsPending(true)\r\n\r\n    try {\r\n      // update online status\r\n      const { uid } = projectAuth.currentUser\r\n      await projectFirestore.collection('users').doc(uid).update({ online: false })\r\n      \r\n      // sign the user out\r\n      await projectAuth.signOut()\r\n      \r\n      // dispatch logout action\r\n      dispatch({ type: 'LOGOUT' })\r\n\r\n      // update state\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      } \r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { logout, error, isPending }\r\n}","export default __webpack_public_path__ + \"static/media/temple.c57f882d.svg\";","import { Link } from 'react-router-dom'\r\nimport { useLogout } from '../hooks/useLogout'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\n\r\n// styles & images\r\nimport './Navbar.css'\r\nimport Temple from '../assets/temple.svg'\r\n\r\nexport default function Navbar() {\r\n  const { logout, isPending } = useLogout()\r\n  const { user } = useAuthContext()\r\n\r\n  return (\r\n    <nav className=\"navbar\">\r\n      <ul>\r\n        {!user && (\r\n          <>\r\n            <li className=\"logo\">\r\n              <img src={Temple} alt=\"dojo logo\" />\r\n              <span>The Dojo</span>\r\n            </li>\r\n\r\n            <li><Link to=\"/login\">Login</Link></li>\r\n            <li><Link to=\"/signup\">Signup</Link></li>\r\n          </>\r\n        )}\r\n\r\n        {user && (\r\n          <li>\r\n            {!isPending && <button className=\"btn\" onClick={logout}>Logout</button>}\r\n            {isPending && <button className=\"btn\" disabled>Logging out...</button>}\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </nav>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/dashboard_icon.bc800f3b.svg\";","export default __webpack_public_path__ + \"static/media/add_icon.376e9b6a.svg\";","import { NavLink } from \"react-router-dom\"\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\n\r\n// components\r\nimport Avatar from \"./Avatar\"\r\n\r\n// styles & images\r\nimport \"./Sidebar.css\"\r\nimport DashboardIcon from '../assets/dashboard_icon.svg'\r\nimport AddIcon from '../assets/add_icon.svg'\r\n\r\nexport default function Sidebar() {\r\n  const { user } = useAuthContext()\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar-content\">\r\n        <div className=\"user\">\r\n          <Avatar src={user.photoURL} />\r\n          <p>Hey {user.displayName}</p>  \r\n        </div>  \r\n        <nav className=\"links\">\r\n          <ul>\r\n            <li>\r\n              <NavLink exact to=\"/\">\r\n                <img src={DashboardIcon} alt=\"dashboard icon\" />\r\n                <span>Dashboard</span>\r\n              </NavLink>\r\n            </li>\r\n            <li>\r\n              <NavLink to=\"/create\">\r\n                <img src={AddIcon} alt=\"add project icon\" />\r\n                <span>New Project</span>\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useCollection } from '../hooks/useCollection'\r\n\r\n// components\r\nimport Avatar from './Avatar'\r\n\r\n// styles\r\nimport './OnlineUsers.css'\r\n\r\nexport default function OnlineUsers() {\r\n  const { isPending, error, documents } = useCollection('users')\r\n\r\n  return (\r\n    <div className=\"user-list\">\r\n      <h2>All Users</h2>\r\n      {isPending && <div>Loading users...</div>}\r\n      {error && <div>{error}</div>}\r\n      {documents && documents.map(user => (\r\n        <div key={user.id} className=\"user-list-item\">\r\n          {user.online && <span className=\"online-user\"></span>}\r\n          <span>{user.displayName}</span>\r\n          <Avatar src={user.photoURL} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  )\r\n}","import { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\nimport { useAuthContext } from './hooks/useAuthContext'\n\n// styles\nimport './App.css'\n\n// pages & components\nimport Dashboard from './pages/dashboard/Dashboard'\nimport Create from './pages/create/Create'\nimport Login from './pages/login/Login'\nimport Signup from './pages/signup/Signup'\nimport Project from './pages/project/Project'\nimport Navbar from './components/Navbar'\nimport Sidebar from './components/Sidebar'\nimport OnlineUsers from './components/OnlineUsers'\n\nfunction App() {\n  const { authIsReady, user } = useAuthContext()\n\n  return (\n    <div className=\"App\">\n      {authIsReady && (\n        <BrowserRouter>\n          {user && <Sidebar />}\n          <div className=\"container\">\n            <Navbar />\n            <Switch>\n              <Route exact path=\"/\">\n                {!user && <Redirect to=\"/login\" />}\n                {user && <Dashboard />}\n              </Route>\n              <Route path=\"/create\">\n                {!user && <Redirect to=\"/login\" />}\n                {user && <Create />}\n              </Route>\n              <Route path=\"/projects/:id\">\n                {!user && <Redirect to=\"/login\" />}\n                {user && <Project />}\n              </Route>\n              <Route path=\"/login\">\n                {user && <Redirect to=\"/\" /> }\n                {!user && <Login /> }\n              </Route>\n              <Route path=\"/signup\">\n                {user && user.displayName && <Redirect to=\"/\" /> }\n                {!user && <Signup /> }\n              </Route>\n            </Switch>\n          </div>\n          {user && <OnlineUsers />}\n        </BrowserRouter>\n      )}\n    </div>\n  );\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}